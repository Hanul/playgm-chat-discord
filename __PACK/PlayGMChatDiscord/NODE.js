PlayGMChatDiscord.DiscordRoom=OBJECT({init:(n,e)=>{const o=require("discord.js"),t=new o.Client;let a;t.on("ready",()=>{a=t.channels.get("484784718416576512")});let i=n=>{let e={};n.mentions.users.size>0&&n.mentions.users.forEach(n=>{e[n.id]=n.name});let o={userId:n.author.id,type:n.type,message:n.content,name:n.author.username,userIconURL:n.author.avatar===TO_DELETE?void 0:"https://cdn.discordapp.com/avatars/"+n.author.id+"/"+n.author.avatar+".png",mentions:e};return void 0!==n.attachments&&n.attachments.forEach(n=>{void 0===o.downloadURL&&(o.fileName=n.filename,o.downloadURL=n.url)}),o};t.on("message",n=>{PlayGMChatDiscord.BROADCAST({roomName:"Discord",methodName:"message",data:i(n)})}),READ_FILE("BOT_TOKEN",n=>{t.login(n.toString())}),PlayGMChatDiscord.ROOM("Discord",(n,e,o,s,c)=>{e("messages",(n,e)=>{void 0!==a&&a.fetchMessages({limit:100}).then(n=>{let o=[];n.forEach(n=>{o.push(i(n))}),e(o)}).catch(console.error)}),e("send",n=>{void 0!==a&&a.send((void 0!==n.name?n.name+" : ":"")+n.message)}),e("sendFile",n=>{void 0!==a&&a.send(n.name+" : ",{files:[{attachment:n.downloadURL,name:n.fileName}]})}),e("getEmojis",(n,e)=>{let o="";t.emojis.forEach(n=>{""!==o&&(o+=", "),o+="<:"+n.name+":"+n.id+">"}),e(o)}),e("getMembers",(n,e)=>{if(void 0!==a){let n="";a.members.forEach(e=>{"offline"!==e.user.presence.status&&(""!==n&&(n+=", "),n+=e.user.username)}),e(n)}})})}});