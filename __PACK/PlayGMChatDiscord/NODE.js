PlayGMChatDiscord.DiscordRoom=OBJECT({init:(n,o)=>{const a=require("discord.js"),e=new a.Client;let t;e.on("ready",()=>{t=e.channels.get("484784718416576512")});let i=n=>{let o={userId:n.author.id,type:n.type,message:n.content,name:n.author.username,userIconURL:n.author.avatar===TO_DELETE?void 0:"https://cdn.discordapp.com/avatars/"+n.author.id+"/"+n.author.avatar+".png"};return void 0!==n.attachments&&n.attachments.forEach(n=>{void 0===o.downloadURL&&(o.fileName=n.filename,o.downloadURL=n.url)}),o};e.on("message",n=>{PlayGMChatDiscord.BROADCAST({roomName:"Discord",methodName:"message",data:i(n)})}),READ_FILE("BOT_TOKEN",n=>{e.login(n.toString())}),PlayGMChatDiscord.ROOM("Discord",(n,o,a,e,s)=>{o("messages",(n,o)=>{void 0!==t&&t.fetchMessages({limit:100}).then(n=>{let a=[];n.forEach(n=>{a.push(i(n))}),o(a)}).catch(console.error)}),o("send",n=>{void 0!==t&&t.send(n.name+" : "+n.message)}),o("sendFile",n=>{void 0!==t&&t.send(n.name+" : ",{files:[{attachment:n.downloadURL,name:n.fileName}]})})})}});